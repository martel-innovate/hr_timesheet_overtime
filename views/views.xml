<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="hr_timesheet_sheet_pivot" model="ir.ui.view">
        <field name="name">hr_timesheet.sheet.pivot</field>
        <field name="model">hr_timesheet.sheet</field>
        <field name="arch" type="xml">
            <pivot string="Timesheet Flexitime Analysis">
                <field name="employee_id" type="row"/>
                <field name="date_start" interval="month" type="col"/>
                <field name="total_time" type="measure"/>
                <field name="total_duty_hours_done" type="measure"/>
                <field name="total_diff_hours_done" type="measure"/>
            </pivot>
        </field>
    </record>


    <record id="action_hr_timesheet_sheet_pivot" model="ir.actions.act_window">
        <field name="name">Flexitime Balance</field>
        <field name="res_model">hr_timesheet.sheet</field>
        <field name="view_mode">pivot</field>
        <field name="context">{}</field>
    </record>


    <menuitem id="timesheet_menu_pivot"
        name="Flexitime Balance"
        parent="hr_timesheet.menu_timesheets_reports_timesheet"
        action="action_hr_timesheet_sheet_pivot"
        sequence="999"
        />


    <record id="timesheet_overtime" model="ir.ui.view">
        <field name="name">hr_timesheet.overtime</field>
        <field name="model">hr_timesheet.sheet</field>
        <field name="inherit_id" ref="hr_timesheet_sheet.hr_timesheet_sheet_form"/>
        <field name="arch" type="xml">
            <xpath expr="/form/sheet/group/group[@name='dates']" position="after">
                <group>
                    <field name="total_duty_hours" widget="float_time" string="Expected this timesheet"/>
                    <field name="total_time" widget="float_time" string="Total time"/>
                    <field name="prev_timesheet_diff" widget="float_time" string="Previous balance"/>
                    <field name="calculate_diff_hours" widget="float_time" string="Total balance"/>
                </group>
            </xpath>
            <notebook position="inside">
                <page string="Flexitime Analysis">
                    <field name="analysis" widget="html" nolabel="1"/>
                </page>
            </notebook>
        </field>
    </record>


    <record id="project_excl_from_printed_timesheets_form" model="ir.ui.view">
        <field name="name">Add field excl_from_printed_timesheets</field>
        <field name="model">project.project</field>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="priority">24</field>
        <field name="arch" type="xml">

            <xpath expr="//div[@id='rating_settings']/.." position="before">
                <div class="row mt16 o_settings_container">
                    <div class="col-lg-6 o_setting_box"  id="timesheet_settings_excl_pr_timesh">
                        <div class="o_setting_left_pane">
                            <field name="excl_from_printed_timesheets"/>
                        </div>
                        <div class="o_setting_right_pane">
                            <label for="excl_from_printed_timesheets" string="Exclude from printed timesheets"/>
                            <div class="text-muted">
                                Time written on this project will not be shown on the timesheet report
                            </div>
                        </div>
                    </div>
                </div>
            </xpath>

        </field>
    </record>


</odoo>
